<!-- AUTHOR INFORMATION
     CREATOR - Casey Rogers XX/XX/2018
     LAST MODIFIED BY - Jeremy Dunnet 15/09/2018
-->

<!-- CLASS/FILE DESCRIPTION
     This html file contains all the chapter headers and subheaders which contain links to other pages
-->

<!-- VERSION HISTORY
     XX/XX/2018 - XXXX

     07/09/2018 (JD) - Updated to use new chapter sections and added test links/ids for initial functionality of dynamic page injection
     09/09/2018 (JD) - Updated to link to new stylesheet for chapter text elements and removed chapter three to ensure javascript works for current setup
     12/09/2018 (CR + JD) - Added new top nav buttons for navigation, as well as linking to help page
     15/09/2018 (JD) - Updated to use new links/names for chapter quiz integration
-->

<!-- REFERENCES
     A lot of basics/design learned/adapted from tutorials available from https://www.w3schools.com
-->

<!DOCTYPE html>
<html>
<head>
    <!-- All stylesheets related to styling parts of the webpage
         Each one is seprated so that individual sections of the page can be styled seperately
    -->
    <link rel="stylesheet" href="/globalCSS/styles.css">
    <link rel="stylesheet" href="chapterNavStyles.css">
    <link rel="stylesheet" href="headerStyles.css">
    <link rel="stylesheet" href="/chapterQuiz/quizScript/quizStyles.css">

    <!-- Broswer check for supported software/versions -->
    <script type="application/javascript" src="../globalErrorPages/browserTest.js"></script>
</head>
<body>

    <div class="navbar">
        <a href="#home">Home</a>
        <a href="#news">News</a>
        <button class="buttons" id="default" onclick="changePage(event, 'home')" style="display: none">Home</button>
        <div class="dropdown" style="float:right;">
            <button class="dropbtn">
                Dropdown
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
                <button class="buttons" id="tutorialButt">Tutorial</button>
                <button class="buttons" id="faqButt">FAQ</button>
                <button class="buttons" id="contactsButt">Contacts</button>
                <button class="buttons" id="settingsButt">Settings</button>
            </div>
        </div>
    </div>

    <!--Actual content of the page-->
    <!--Landing page of help page-->
    <div class="content" id="home">
        <h1>This is the Main Screen</h1>
        <p>Select a content header to get started!</p>
    </div>

    <div class="row">
        <div class="leftcolumn">
            <!-- encapsulate the side navigation bar-->
            <div class="sidenav">

                <!-- chapter 1 dropdown-->
                <button class="dropdown-btn" id="chapterOne">
                    Chapter 1
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-container">
                    <a id="scPop">Pop Culture</a>
                    <a id="scTrickOne">Trick Questions</a>
                    <a id="scMed">Medicine</a>
                    <a id="scObv">Obviousness</a>
                    <a id="scMyth">Mythology</a>
                    <a id="cqOne">Chapter Quiz</a>
                </div>
                <!--chapter 2 dropdown-->
                <button class="dropdown-btn" id="chapterTwo">
                    Chapter 2
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-container">
                    <a id="scTrickTwo">Trick Questions</a>
                    <a id="scAnimal">Animals</a>
                    <a id="scAstro">Astrology</a>
                    <a id="scTime">Time</a>
                    <a id="scHist">History</a>
                    <a id="cqTwo">Chapter Quiz</a>
                </div>

                <a href="#">Search</a>
            </div>
        </div>
    </div>

    <!-- example from www.w3schools.com/howto/howto_js_filterdropdown.asp */ -->
    <div id="dropdownUI" class="UserInterfaceSearchScreen">
        <input id="inputBox" type="text" placeholder="Enter search..." onkeyup="displayFilter()">
        <div id="dropDownList" class="dropDownList">

            <a href="#apple">Apple</a>
            <a href="#banana">Banana</a>
            <a href="#carrot">Carrot</a>
            <a href="#danish">Danish</a>
            <a href="#eggplant">Eggplant</a>
            <a href="#fritters">Fritters</a>
            <a href="#garlic">Garlic</a>
            <a href="#halloumi">Halloumi</a>
            <a href="#ice">Ice</a>
            <a href="#jalapeno">Jalapeno</a>
        </div>

    </div>


    <script>

        // Solution based on: https://css-tricks.com/forums/topic/how-to-change-styles-on-onload/
        window.onload = pre_loader; // Hides the search items when the page is loaded



        /**************************************************************************
        *  Function: Event listener click event                                   *
        *  Purpose: Detect the location of clicks relative to the search bar and  *
        *           search items                                                  *
        *  IMPORT: none                                                           *
        *  EXPORT: none                                                           *
        *  ***********************************************************************/
        //Based on example from http://blustemy.io/detecting-a-click-outside-an-element-in-javascript/
        document.addEventListener("click", (evt) =>
        {
            const flyoutElement = document.getElementById("dropdownUI");
            var clickFlag = false;
            let targetElement = evt.target;

            do
            {
                if (targetElement == flyoutElement)
                {
                    // A click has been made in the search bar and associated items
                    clickFlag = true;

                }

                targetElement = targetElement.parentNode;
            } while (targetElement);

            if (clickFlag)
            {
                // Show search items
                searchFilter();
            }
            else
            {
                // Hide search items
                searchFilterBlur();
            }

            clickFlag = false;

            return;
        });


        /**************************************************************************
        *  Function: pre_loader                                                   *
        *  Purpose: Hides the search list before the page is loaded               *
        *  IMPORT: none                                                           *
        *  EXPORT: none                                                           *
        *  ***********************************************************************/

        function pre_loader()
        {
            // Solution based on: https://css-tricks.com/forums/topic/how-to-change-styles-on-onload/

            document.getElementById("dropDownList").style.display = "none";
        };

        /**************************************************************************
        *  Function: searchFilter                                                 *
        *  Purpose: Enable the display of the current items in the search list    *
        *  IMPORT: none                                                           *
        *  EXPORT: none                                                           *
        *  ***********************************************************************/

        function searchFilter()
        {
            document.getElementById("dropDownList").style.display = "block";
        }


        /**************************************************************************
        *  Function: searchFilterBlur                                             *
        *  Purpose: Disable and hide the current items in the search list         *
        *  IMPORT: none                                                           *
        *  EXPORT: none                                                           *
        *  ***********************************************************************/

        function searchFilterBlur()
        {
            document.getElementById("dropDownList").style.display = "none";
        }


        /**************************************************************************
        *  Function: displayFilter                                                *
        *  Purpose: Alter the displayed search list based on user input           *
        *  IMPORT: none                                                           *
        *  EXPORT: none                                                           *
        *  ***********************************************************************/

        function displayFilter()
        {
            /* Based on example from www.w3schools.com/howto/howto_js_filterdropdown.asp */

            var searchInput, searchValue, a, i;

            searchInput = document.getElementById("inputBox");

            searchValue = searchInput.value.toUpperCase();

            div = document.getElementById("dropDownList");

            a = div.getElementsByTagName("a");

            for (i = 0; i < a.length; i++)
            {
                if (a[i].innerHTML.toUpperCase().indexOf(searchValue) > -1)
                {
                    a[i].style.display = "";
                }
                else
                {
                    a[i].style.display = "none";
                }

            }
        }
    </script>

    <script>
        /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
        var dropdown = document.getElementsByClassName("dropdown-btn");
        var i;

        for (i = 0; i < dropdown.length; i++)
        {
            dropdown[i].addEventListener("click", function ()
            {
                this.classList.toggle("active");
                var dropdownContent = this.nextElementSibling;
                if (dropdownContent.style.display === "block")
                {
                    dropdownContent.style.display = "none";
                } else
                {
                    dropdownContent.style.display = "block";
                }
            });
        }
    </script>

    <!-- This is all the seperate javascript files (to allow to functionaility to be divided)
         This list is put into a load order as some script files may call functions of others
         Be aware this means these files can see each others global constants etc. so they all need to be unique names
         Insert new files in the correct order or page may fail to load
    -->
    <script type="application/javascript" src="/chapterQuiz/quizScript/quiz.js"></script>
    <script type="application/javascript" src="chapterSwitch.js"></script>
</body>
</html>
